sub(team,$tk,$td1,$td2)
   $tk = TFREAD("taikhoan\\taikhoan.txt",$tk)
   $x = TFREAD("taikhoan\\toado.txt",$td1)
   $y = TFREAD("taikhoan\\toado.txt",$td2)
   $reg = TFREAD("ht\\checkrg.txt",1)
   $btn = TFREAD("ht\\btn.txt",1)
   $Guild = TFREAD("ht\\Guild.txt",1)
   $wnd1 = wndfind($tk)
   $vk = TFREAD("ht\\gocvk.txt",1)
   $time = TFREAD("ht\\time.txt",1)
   $time = $time*60*1.7
   waitms(500)
   wndSize($wnd1,300,200)
   wndPos($wnd1,$x,$y)
    $nhatky = STRCONCAT($tk," Win:  ", $Win , " lose:  ", $lose, "   Relog:  ",$re)
	hsettext($wnd1,$nhatky)
	hset($wnd1,1)
   LCLICK(0,0)
   getscreen
end_sub

if( $reg = 1)
  if( $wnd1  =  0)
   $re=$re+1
   print( "Relog:  ",$re)
   $mkn = 0
   $mkn1 = 0
   $mkn2 = 0
   $mkn3 = 0
   $mkn4 = 0
   $mkn5 = 0
   $mkn6 = 0
   $mkn7 = 0
   $mkn8 = 0
   $mkn9 = 0
   $mkn10 = 0
   $mknlt = 0
   $mknld = 0
   $goc = 0
   $goc1 = 0
   $q = 0
   $q1 = 0
   $ss = 0
   $buff = 0
   $b = 0
   $i = 0
   $moi = 0
   $moi1 = 0
   $relog = 0
   $bd = 0
   $vt = 0
   $ban = 0
   $Q = 0
   $Lmh = 0
   $Turn = 0
   $loilatthe = 0
   $vitri = 0
   $loiss = 0
   wait(1)
end_if

getscreen
if_pixel_in(280,34,280,34,3969611,12713677) // mkn trong tran
   $mkn=$mkn+1
   if($mkn>=$time)
      PostMessage($wnd1, 0x0010, 0, 0)
      print("mkn trong pb")
   end_if
end_if

if_pixel_in(255,146,255,146,12839145,2888883)  //mkn loadding    1x
   $mknld = $mknld +1
   
end_if
if($mknld>=280)
   PostMessage($wnd1, 0x0010, 0, 0)
   print("mkn loadding")
end_if
   if_pixel_in(39,137,39,137,2049901,2049901)  // mkn sanh chinh  xx
   $mkn1=$mkn1+1
   if($mkn1>=2500)
      PostMessage($wnd1, 0x0010, 0, 0)
      print("mkn s?nh")
   end_if
end_if

if_pixel_in(183,38,183,38,7117222)   xx
   $mkn2=$mkn2+1
   if($mkn2>=100)
      PostMessage($wnd1, 0x0010, 0, 0)
      print("mkn trong avc")
   end_if
end_if

if_pixel_in(206,34,206,34,2519197) // mkn trong phong pb   xx
   $mkn3=$mkn3+1
   if($mkn3>=250)
      PostMessage($wnd1, 0x0010, 0, 0)
      print("mkn phong")
   end_if
end_if
if_pixel_in(90,65,90,65,1115942,1116457) // mkn load tranxx
   $mkn4 = $mkn4+1
   if($mkn4>=100)
      PostMessage($wnd1, 0x0010, 0, 0)
      print("mkn load tran")
   end_if
end_if


if_pixel_in(75,34,75,34,0) // mkn man hinh den
   $mkn5 = $mkn5+1
   if($mkn5>=35)
      PostMessage($wnd1, 0x0010, 0, 0)
      print("mhd")
   end_if
end_if

if_pixel_in(172,111,172,111,10664902)  // mkn dang nhap lai xx
   $mkn6 = $mkn6+1
   if($mkn6>=5)
      PostMessage($wnd1, 0x0010, 0, 0)
   end_if
end_if
if_pixel_in(88,61,88,61,3895432)   // mkn hay dang nhap l?i baotri
   PostMessage($wnd1, 0x0010, 0, 0)
   print("mkn dn lai1")
end_if
if_pixel_in(73,62,73,62,3895432)   // t?i danh sÃ¡ch sever th?t b?i
   PostMessage($wnd1, 0x0010, 0, 0)
   print("tai danh sach tb")
end_if
if_pixel_in(171,111,171,111,10664902)   // mkn hay dang nhap l?i xx
   PostMessage($wnd1, 0x0010, 0, 0)
   print("mkn dn lai")
end_if
if_pixel_in(83,61,83,61,2712445)   // dn th?t b?i
   PostMessage($wnd1, 0x0010, 0, 0)
   print("dn that bai")
end_if


if_pixel_in(75,34,75,34,16777215) // mkn man hinh trang
   $mkn7=$mkn7+1
   if($mkn7>=35)
      PostMessage($wnd1, 0x0010, 0, 0)
      print("mht")
   end_if
end_if

if( $mknlt >= 2  )                   // mkn latthe
   PostMessage($wnd1, 0x0010, 0, 0)
   print("mkn lat the")
end_if

if_pixel_in(53,36,53,36,7380399) // mkn man hinh vang
   $mkn8=$mkn8+1
   if($mkn8>=35)
      PostMessage($wnd1, 0x0010, 0, 0)
      print("mkn mhv")
   end_if
end_if
if_pixel_in(113,65,113,65,6856117) // mkn man hinh vang 1
   $mkn9=$mkn9+1
   if($mkn9>=35)
      PostMessage($wnd1, 0x0010, 0, 0)
      print("mkn mhv1")
   end_if
end_if
//PostMessage($wnd1, 0x0010, 0, 0)
end_if
// ho tro
getscreen
if_pixel_in(118,59,118,59,865375)   // tat goi y
LCLICK(231,27)  // 9599593
end_if
if_pixel_in(194,46,194,46,1065081)   // tat sk
LCLICK(238,16)  // 16579836
end_if
if_pixel_in(128,93,128,93,7683556)   // tat giai dau
LCLICK(165,102)  // 9599593
end_if
if_pixel_in(165,42,165,42,1392236)   // tat thuyen rong
LCLICK(257,11)  // 14138273
end_if
if_pixel_in(244,127,244,127,735594)   // tat goi y  nho
LCLICK(269,99)  // 2136022
end_if
if_pixel_in(136,42,136,42,865888)   // tat nv
LCLICK(245,11)  // 15919327
end_if
if_pixel_in(167,52,167,52,800878)   // tat boss tg
LCLICK(190,21)  // 9270628
end_if
if_pixel_in(141,46,141,46,537193)   // tat VIp
LCLICK(209,17)  // 15258558
end_if
//

sub(taophong,$tp)  /// 0 avc - 1pg xong
   getscreen
   if_pixel_in(39,137,39,137,2049901)   // click ai vien chinh
      if($tp = 0)
         LCLICK(244,123)  // 14541534
      else
         LCLICK(162,59)  // 3044751
      end_if
      waitms(500)
   end_if
   getscreen
   if_pixel_in(183,38,183,38,7117222)   // click tao phong
      LCLICK(205,135)  // 2522809
      waitms(1000)
   end_if
end_sub

sub(moi) //--------------------------------   moi ban
 getscreen
   if( $Guild = 2)
      $m = 132
   else
      $m = 150
   end_if
   getscreen
   if_pixel_in(96,54,96,54,8813483)    //
      LCLICK(88,28)  // 15257527
      waitms(500)
      LCLICK(88,28)
      waitms(500)
      LCLICK(226,133)  // 5143437
      waitms(500)
   else
      if_pixel_in(96,103,96,103,9865662)    //
         LCLICK(89,77)  // 13649024
         waitms(500)
         LCLICK(89,77)
         waitms(500)
         LCLICK(226,133)
         waitms(500)
      else
         if_pixel_in(41,103,41,103,9865662)
            LCLICK(32,76)  // 15920378
            waitms(500)
            LCLICK(32,76)
            waitms(500)
            LCLICK(226,133)
            waitms(500)
         end_if
      end_if
   end_if
   if_pixel_in(96,54,96,54,10338253)
      LCLICK(88,28)  // 15193025
      waitms(500)
      LCLICK(226,133)
      waitms(500)
   else
      if_pixel_in(96,103,96,103,15986927)
         LCLICK(89,77)  // 15257527
         waitms(500)
         LCLICK(226,133)
         waitms(500)
      else
         if_pixel_in(41,103,41,103,15987440)
            LCLICK(32,76)  // 15191733
            waitms(500)
            LCLICK(226,133)
            waitms(500)
         end_if
      end_if
   end_if
   getscreen
   if_pixel_in(144,65,144,65,998255)
      LCLICK($m,47)
      LCLICK(164,57)  // 11507617
      waitms(200)
      LCLICK(164,64)  // 473198
      waitms(200)
      LCLICK(165,72)  // 6332101
      waitms(200)
      LCLICK(165,82)  // 1390680
      waitms(200)
      LCLICK(176,34)  // 3767971
      $moi = $moi +1
      waitms(2000)
      for($chonpb, $chonpb < 1)
         LCLICK(169,58)  // 16446710
      end_cyc
   end_if
   if($moi >=3)
      LCLICK(111,7)  // 13940893
      waitms(300)
 LCLICK(111,58)  // 13940893
      waitms(300)
      LCLICK(54,58)  // 481015
      waitms(200)
    LCLICK(271,148)  // 6132394  
      $moi=0
      $ss=0
   end_if
   getscreen
   if_pixel_in(277,162,277,162,9013641)
      $ss = $ss+1
      if($ss >=8)
         LCLICK(109,7)  // 13940893
         waitms(200)
         LCLICK(109,57)  // 13940893
         waitms(200)
         LCLICK(55,57)  // 11060474
         waitms(200)
         LCLICK(270,148)  // 6197930
         waitms(200)
         $moi=0
         $ss=0
      end_if
   end_if
end_sub

sub(chonpb,$lpb,$pb,$dk)
   $lpb =  30*$lpb + 55
   if($pb <= 4)
      $pb = $pb*35 + 45
      $pb1 = 60
   else
      if(($pb > 4) & ($pb<=8))
         $pb = $pb - 4
         $pb =   $pb*35 + 45
         $pb1 = 80
      else
         if(($pb > 8) & ($pb <= 12))
            $pb = $pb - 8
            $pb =  $pb*35 + 45
            $pb1 = 60
            LCLICK(219,82)  // 465210
            LCLICK(219,82)  // 465210
            LCLICK(219,82)  // 465210
            LCLICK(219,82)  // 465210
            LCLICK(219,82)  // 465210
            LCLICK(219,82)  // 465210
            LCLICK(219,82)  // 465210
         else
            if(($pb > 12) & ($pb <= 16))
               $pb = $pb - 12
               $pb =  $pb*35 + 45
               $pb1 = 80
               LCLICK(219,82)  // 465210
               LCLICK(219,82)  // 465210
               LCLICK(219,82)  // 465210
               LCLICK(219,82)  // 465210
               LCLICK(219,82)  // 465210
               LCLICK(219,82)  // 465210
               LCLICK(219,82)  // 465210
            else
               if(($pb > 16) & ($pb <= 20))
                  $pb = $pb - 16
                  $pb =  $pb*35 + 45
                  $pb1 = 60
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
                  LCLICK(219,82)  // 465210
               end_if
            end_if
         end_if
      end_if
   end_if
   LCLICK($lpb,53)  // sc
   waitms(200)
   LCLICK($pb,$pb1)  // 1
   waitms(200)
   if( $btn <= 1 )
   else
      if($btn = 2)
         if ($dk = 1)
            LCLICK(108,133)  // 1611240
         else
            if ($dk = 2)
               LCLICK(170,134)  // 4285312
            end_if
         end_if
      else
         if($btn = 3)
            if ($dk = 1)
               LCLICK(86,136)  // 1648690
            else
               if ($dk = 2)
                  LCLICK(132,131)  // 8432834
               else
                  if ($dk = 3)
                     LCLICK(196,134)  // 1650773
                  end_if
               end_if
            end_if
         else
            if($btn = 4)
               if ($dk = 1)
                  LCLICK(81,133)  // 8433606
               else
                  if ($dk = 2)
                     LCLICK(121,133)  // 7514047
                  else
                     if ($dk = 3)
                        LCLICK(165,135)  // 1584980
                     else
                        if ($dk = 4)
                           LCLICK(205,134)  // 1519187
                        end_if
                     end_if
                  end_if
               end_if
            else
               if($btn >= 5)
                  if ($dk = 1)
                     LCLICK(75,134)  // 8699864
                  else
                     if ($dk = 2)
                        LCLICK(112,134)  // 16383997
                     else
                        if ($dk = 3)
                           LCLICK(143,135)  // 8762566
                        else
                           if ($dk = 4)
                              LCLICK(168,134)  // 9949148
                           else
                              if ($dk = 5)
                                 LCLICK(201,135)  // 1584980
                              end_if
                           end_if
                        end_if
                     end_if
                  end_if
               end_if
            end_if
         end_if
      end_if
   end_if
   waitms(200)
   LCLICK(142,153)  // 67085
   waitms(500)
   LCLICK(268,130)  // 396564
   $mknlt = 0
end_sub
sub(batdau)
   //--------------------------------
   if_pixel_in(270,169,270,169,13498623)   // an bat dau
      for($chonpb, $chonpb < 1)
         LCLICK(170,39)  // 3629973
      end_cyc
      LCLICK(270,130)  // 861502      
      $mknlt = 0
   end_if
   if_pixel_in(119,92,119,92,1063529)   // tat goi y di 1 minh
      LCLICK(106,94)  // 1061981
      $mknlt = 0
   end_if
end_sub


sub(ban,$luc,$gvk)
   if($luc = 0)
      Keypress(#p)
   else
      for ($goc, $goc< $gvk + 15 - $vk)
         keypress(38)
      end_cyc
      #includer("ht\\buff.txt")
      keydown(68)
      $f = 1
      //if($luc < 4 )
      //  $luc = 4
      // end_if
      if($luc > 97 )
         $luc = 97
      end_if
      $luc1 =  50 + ($luc * 1.4)
      $luc2 = int($luc1)
      while($f = 1)
         $fix = $fix + 1
         if($fix > = 6200)
            $f =0
            $fix = 0
            keyUp(68)
         end_if
		 getscreen
         if_pixel_in($luc2,189,$luc2,189,670707,670706,3441096,3507660) //1719738,3507660,2449301,3044534,3902929,2900577,3441096)
            keyUp(68)
            $fix = 0
            $f = 0
         end_if
      end_cyc
   end_if
end_sub



sub(ban2 , $luc,$gvk)
if($luc = 0)
Keypress(#p)
else
   for ($goc, $goc< $gvk + 15 - $vk)
      keypress(40)
   end_cyc
   #includer("ht\\buff.txt")
   keydown(68)
   $f = 1
   //if($luc < 4 )
   //  $luc = 4
   // end_if
   if($luc > 97 )
      $luc = 97
   end_if
   $luc1 =  50 + ($luc * 1.4) 
   $luc2 = int($luc1)
   while($f = 1)
      $fix = $fix + 1
      if($fix > = 150)
         $f =0
 $fix = 0
         keyUp(68)
      end_if
      getscreen
      if_pixel_in($luc2,189,$luc2,189,670707,670706,1719738,3507660,2449301,3044534)
         keyUp(68)
         $fix = 0
         $f = 0
      end_if
   end_cyc
end_if
end_sub

sub(ban1 , $luc)
   #includer("ht\\buff.txt")
   keydown(68)
   $f = 1
   //if($luc < 4 )
   //  $luc = 4
   // end_if
   if($luc > 97 )
      $luc = 97
   end_if
   $luc1 =  50 + ($luc * 1.4)
   
   $luc2 = int($luc1)
   while($f = 1)
      $fix = $fix + 1
      if($fix > = 150)
         $f =0
 $fix = 0
         keyUp(68)
      end_if
      getscreen
      if_pixel_in($luc2,189,$luc2,189,670707,670706,1719738,3507660,2449301,3044534)
         keyUp(68)
         $fix = 0
         $f = 0
      end_if
   end_cyc

end_sub

sub(nhiemvu)
getscreen
if_pixel_in(136,42,136,42,865888)
   if_pixel_in(89,53,89,53,1387617)
      LCLICK(85,97)  // 735341
      waitms(500)
   end_if
   if_pixel_in(89,69,89,69,1060195)
      LCLICK(151,102)  // 6395837
      waitms(500)
   end_if
   if_pixel_in(94,101,94,101,1335704,6526718)
      LCLICK(88,114)  // 1523824
      waitms(500)
   end_if
   getscreen
   if_pixel_in(91,83,91,83,13300735,1400214,1203348)
      if_pixel_in(191,172,191,172,2961973)
         LCLICK(243,8)  // 13941150
      else
         LCLICK(186,141)  // 5676223
         waitms(500)
         DBLCLICK(149,102)  // 1389139
         waitms(500)
         LCLICK(243,8)
         $nv = 0
         $mknlt =0
	waitms(500)
      end_if
   end_if
end_if
end_sub
sub(latthe,$lt,$nnv) // $nnv = 1 nhan nv
getscreen
if_pixel_in(71,43,71,43,25067)
   $lt1 = (($lt-1)*40) + 25
waitms(800)
   $mknlt = $mknlt + 1
   LCLICK($lt1,35)
   waitms(800)
   LCLICK($lt1,85)
   waitms(800)
   LCLICK($lt1,135)
   waitms(800)
   LCLICK(115,97)  // 3368072
   $win=$win + 1
   print(" Win:  ", $Win , " lose:  ", $lose, "   Relog:  ",$re)   

   wait(16)
   if( $nnv = 1)
      LCLICK(212,152)// click nv
      wait(1)
    LCLICK(212,152)// click nv
getscreen
      nhiemvu()
   end_if
   $bo = 0
   $dung = 0
   $mkn = 0
   $mkn1 = 0
   $mkn2 = 0
   $mkn3 = 0
   $mkn4 = 0
   $mkn5 = 0
   $mkn6 = 0
   $mkn7 = 0
   $mkn8 = 0
   $mkn9 = 0
   $mkn10 = 0
   $mknlt = 0
   $mknld = 0
   $goc = 0
   $goc1 = 0
   $q = 0
   $q1 = 0
   $ss = 0
   $buff = 0
   $b = 0
   $i = 0
   $moi = 0
   $moi1 = 0
   $q2=0
   $relog = 0
   $bd=0
   $ban=0
   $f=0
   $Q = 0
   $Lmh = 0
   $Turn = 0
   $loilatthe = 0
   $vitri = 0
   $loiss = 0
end_if
end_sub



if_pixel_in(265,60,265,60,16775914)
   $lose = $lose + 1
   print(" Win:  ", $Win , " lose:  ", $lose, "   Relog:  ",$re)
   $mkn = 0
   $mkn1 = 0
   $mkn2 = 0
   $mkn3 = 0
   $mkn4 = 0
   $mkn5 = 0
   $mkn6 = 0
   $mkn7 = 0
   $mkn8 = 0
   $mkn9 = 0
   $mkn10 = 0
   $mknlt = 0
   $mknld = 0
   $goc = 0
   $goc1 = 0
   $q = 0
   $q1 = 0
   $q2 = 0
   $ss = 0
   $buff = 0
   $b = 0
   $bo = 0
   $dung = 0
   $i = 0
   $moi = 0
   $moi1 = 0
   $relog = 0
   $bd = 0
   $ban = 0
   $Q = 0
   $Lmh = 0
   $Turn = 0
   $loilatthe = 0
   $vitri = 0
   $loiss = 0
    wait(4)
end_if

sub(clone)
   if_pixel_in(69,53,69,53,1196915)   // tat goi y di 1 minh
      LCLICK(47,37)  // 8095630
      $mknlt = 0
   end_if
if_pixel_in(64,55,64,55,6957260)   // tat giai dau
   LCLICK(77,39)  // 8220232
end_if
   if_pixel_in(270,168,270,168,7967140) // thoat phong pb
      LCLICK(272,153)  // 722285
   end_if
   if_pixel_in(113,96,113,96,799068) // dong y thoat phong pb
   LCLICK(106,96)  // 799582      
   end_if
   //--------------------------------
   getscreen
  if_pixel_in(134,86,134,86,1128807) // nhan moi
      LCLICK(113,103)  // 7255257 
   end_if
   if_pixel_in(270,169,270,169,12252927) // chuan bi
   LCLICK(268,130)  // 1782865      
      $mkn = 0
      $mkn1 = 0
      $mkn2 = 0
      $mkn4 = 0
      $mkn5 = 0
      $mkn6 = 0
      $mkn7 = 0
      $mkn8 = 0
      $mkn9 = 0
      $mkn10 = 0
      $mknlt = 0
      $mknld = 0
      $goc = 0
      $goc1 = 0
      $q = 0
      $q1 = 0
      $ss = 0
      $buff=0
      $b=0
      $i = 0
      $bd = 0
      $moi = 0
      $moi1 = 0
      $mknlt = 0
   end_if
end_sub